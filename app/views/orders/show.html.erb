<h1>Order <span class="text-primary">#<%= @order.id %></span></h1>

<div class="card mb-4">
  <h2 class="mb-3">Customer Information</h2>

  <p class="mb-1 fw-bold"><%= @order.customer.first_name %> <%= @order.customer.last_name %></p>
  <p class="mb-1"><%= @order.customer.address %></p>
  <p class="mb-1">
    <%= @order.customer.city %>,
    <%= @order.customer.province %>
    <%= @order.customer.postal_code %>
  </p>
  <p class="text-muted"><%= @order.customer.email %></p>
</div>

<div class="card mb-4">
  <h2 class="mb-3">Order Items</h2>

  <table class="table table-bordered align-middle mb-0">
    <thead class="table-light">
      <tr>
        <th>Product</th>
        <th class="text-end">Price</th>
        <th class="text-center">Qty</th>
        <th class="text-end">Line Total</th>
      </tr>
    </thead>
    <tbody>
      <% @order.order_items.each do |item| %>
        <tr>
          <td><%= item.product.name %></td>
          <td class="text-end">$<%= '%.2f' % item.price %></td>
          <td class="text-center"><%= item.quantity %></td>
          <td class="text-end">$<%= '%.2f' % item.line_total %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<div class="card p-4">
  <h2 class="mb-3">Totals</h2>

  <p><strong>Subtotal:</strong> $<%= '%.2f' % @order.subtotal %></p>
  <p><strong>GST:</strong> $<%= '%.2f' % @order.total_gst %></p>
  <p><strong>PST:</strong> $<%= '%.2f' % @order.total_pst %></p>
  <p><strong>HST:</strong> $<%= '%.2f' % @order.total_hst %></p>

  <hr>

  <h3 class="text-primary fw-bold">
    Total: $<%= '%.2f' % @order.total %>
  </h3>
</div>

<div class="mt-4">
  <%= link_to "Back to My Orders", my_orders_path, class: "btn btn-secondary" %>
</div>
