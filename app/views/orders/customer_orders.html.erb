<h1>My Orders</h1>

<p>
  <%= link_to "Back to Products", products_path, class: "btn btn-secondary mb-3" %>
</p>

<% if @orders.any? %>
  <% @orders.each do |order| %>
    <div class="card mb-3">
      <h2 class="h5 mb-2">Order #<%= order.id %></h2>

      <p class="mb-3">
        <strong>Date:</strong>
        <%= l(order.created_at, format: :short) %>
        <%# or: order.created_at.strftime("%Y-%m-%d %H:%M") if you prefer %>
      </p>

      <h3 class="h6">Items</h3>

      <table class="table table-sm align-middle mb-3">
        <thead>
          <tr>
            <th>Product</th>
            <th>Price</th>
            <th>Qty</th>
            <th>Line Total</th>
          </tr>
        </thead>
        <tbody>
          <% order.order_items.each do |item| %>
            <tr>
              <td><%= item.product.name %></td>
              <td><%= number_to_currency(item.price) %></td>
              <td><%= item.quantity %></td>
              <td><%= number_to_currency(item.line_total) %></td>
            </tr>
          <% end %>
        </tbody>
      </table>

      <div class="mt-2">
        <p><strong>Subtotal:</strong> <%= number_to_currency(order.subtotal) %></p>
        <p><strong>GST:</strong> <%= number_to_currency(order.total_gst) %></p>
        <p><strong>PST:</strong> <%= number_to_currency(order.total_pst) %></p>
        <p><strong>HST:</strong> <%= number_to_currency(order.total_hst) %></p>
        <p><strong>Grand Total:</strong> <%= number_to_currency(order.total) %></p>
      </div>
    </div>
  <% end %>
<% else %>
  <p>You have no past orders yet.</p>
<% end %>
