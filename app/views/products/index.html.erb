<h1>Our Products</h1>

<div style="display: flex; gap: 2rem;">
  <!-- Sidebar: Categories -->
  <aside style="width: 200px;">
    <h3>Filter by Category</h3>
    <ul>
      <li><%= link_to "All Products", root_path %></li>
      <% @categories.each do |category| %>
        <li>
          <%= link_to category.name, category_path(category) %>
        </li>
      <% end %>
    </ul>
  </aside>

  <!-- Main: Products list -->
  <section style="flex: 1;">
    <% if @products.any? %>
      <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1.5rem;">
        <% @products.each do |product| %>
          <div style="border: 1px solid #ccc; padding: 1rem;">
            <% if product.image.attached? %>
              <div style="margin-bottom: 0.5rem;">
                <%= image_tag url_for(product.image), style: "max-width: 100%; height: auto;" %>
              </div>
            <% end %>

            <h2 style="font-size: 1.1rem;">
              <%= link_to product.name, product_path(product) %>
            </h2>

            <p><strong>Category:</strong> <%= product.category.name %></p>
            <p><strong>Price:</strong> $<%= product.price %></p>

            <% if product.on_sale? %>
              <p style="color: red; font-weight: bold;">On Sale!</p>
            <% end %>
          </div>
        <% end %>
      </div>
    <% else %>
      <p>No products available.</p>
    <% end %>
  </section>
</div>
